{"version":3,"file":"commonHelpers2.js","sources":["../src/img/error.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__8479b7dd__\"","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport axios from 'axios';\nimport errorSvg from '/img/error.svg';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nlet limit;\n\nconst searchParams = {\n  key: '41647148-76dbe9dab66bab2692c283b6e',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: 'true',\n  per_page: 40,\n  page: 1,\n};\n\nconst simpleGallery = new SimpleLightbox('.gallery a', {\n  overlayOpacity: 0.8,\n  captionsData: 'alt',\n  captionDelay: 500,\n});\n\nconst form = document.querySelector('.gallery-form');\nconst searchInput = document.querySelector('.search-input');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  if (!searchInput.value.trim()) {\n    showErrorMessage('Please fill in the search field');\n    return;\n  }\n  try {\n    gallery.innerHTML = '';\n    loader.style.display = 'inline-block';\n    searchParams.q = searchInput.value.trim();\n    searchParams.page = 1;\n    const data = await fetchPhotos();\n    limit = data.totalHits;\n    createGallery(data);\n  } catch (error) {\n    console.log(error);\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  try {\n    loader.style.display = 'inline-block';\n    const photos = await fetchPhotos();\n    createGallery(photos);\n  } catch (error) {\n    console.log(error);\n  }\n});\n\nasync function fetchPhotos() {\n  const response = await axios.get('', { params: searchParams });\n  return response.data;\n}\n\nfunction createGallery(photos) {\n  if (!photos.total) {\n    showErrorMessage(\n      'Sorry, there are no images matching your search query. Please, try again!'\n    );\n    loader.style.display = 'none';\n    return;\n  }\n  const markup = photos.hits\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"api-img\" src=\"${webformatURL}\" alt=\"${tags}\">\n            <div class=\"img-desc\">\n              <span><b>Likes:</b> <br/>${likes}</span>\n              <span><b>Views:</b> <br/>${views}</span>\n              <span><b>Comments:</b> <br/>${comments}</span>\n              <span><b>Downloads:</b> <br/>${downloads}</span>\n            </div>\n          </a>\n        </li>\n                  `;\n      }\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  loader.style.display = 'none';\n  checkLimit();\n  scrollPage();\n  simpleGallery.refresh();\n  form.reset();\n}\n\nfunction checkLimit() {\n  if (Math.ceil(limit / searchParams.per_page) === searchParams.page) {\n    showErrorMessage(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n    loadMoreBtn.style.display = 'none';\n  } else {\n    searchParams.page += 1;\n    loadMoreBtn.style.display = 'inline-block';\n  }\n}\n\nfunction scrollPage() {\n  if (searchParams.page > 1) {\n    const rect = document\n      .querySelector('.gallery-item')\n      .getBoundingClientRect();\n    window.scrollBy({ top: rect.height * 2, left: 0, behavior: 'smooth' });\n  }\n}\n\nfunction showErrorMessage(message) {\n  iziToast.show({\n    position: 'topRight',\n    iconUrl: errorSvg,\n    message,\n    backgroundColor: '#EF4040',\n    messageColor: '#FAFAFB',\n    messageSize: '16px',\n    close: false,\n    closeOnClick: true,\n    closeOnEscape: true,\n  });\n}\n"],"names":["errorSvg","axios","limit","searchParams","simpleGallery","SimpleLightbox","form","searchInput","gallery","loader","loadMoreBtn","event","showErrorMessage","data","fetchPhotos","createGallery","error","photos","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","checkLimit","scrollPage","rect","message","iziToast"],"mappings":"owBAAA,MAAeA,EAAA,2CCKfC,EAAM,SAAS,QAAU,2BAEzB,IAAIC,EAEJ,MAAMC,EAAe,CACnB,IAAK,qCACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAM,CACR,EAEMC,EAAgB,IAAIC,EAAe,aAAc,CACrD,eAAgB,GAChB,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAO,SAAS,cAAc,eAAe,EAC7CC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAE3DJ,EAAK,iBAAiB,SAAU,MAAMK,GAAS,CAE7C,GADAA,EAAM,eAAc,EAChB,CAACJ,EAAY,MAAM,OAAQ,CAC7BK,EAAiB,iCAAiC,EAClD,MACD,CACD,GAAI,CACFJ,EAAQ,UAAY,GACpBC,EAAO,MAAM,QAAU,eACvBN,EAAa,EAAII,EAAY,MAAM,KAAI,EACvCJ,EAAa,KAAO,EACpB,MAAMU,EAAO,MAAMC,IACnBZ,EAAQW,EAAK,UACbE,EAAcF,CAAI,CACnB,OAAQG,EAAP,CACA,QAAQ,IAAIA,CAAK,CAClB,CACH,CAAC,EAEDN,EAAY,iBAAiB,QAAS,SAAY,CAChD,GAAI,CACFD,EAAO,MAAM,QAAU,eACvB,MAAMQ,EAAS,MAAMH,IACrBC,EAAcE,CAAM,CACrB,OAAQD,EAAP,CACA,QAAQ,IAAIA,CAAK,CAClB,CACH,CAAC,EAED,eAAeF,GAAc,CAE3B,OADiB,MAAMb,EAAM,IAAI,GAAI,CAAE,OAAQE,CAAY,CAAE,GAC7C,IAClB,CAEA,SAASY,EAAcE,EAAQ,CAC7B,GAAI,CAACA,EAAO,MAAO,CACjBL,EACE,2EACN,EACIH,EAAO,MAAM,QAAU,OACvB,MACD,CACD,MAAMS,EAASD,EAAO,KACnB,IACC,CAAC,CACC,cAAAE,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,0CAE2BN;AAAA,wCACFC,WAAsBC;AAAA;AAAA,yCAErBC;AAAA,yCACAC;AAAA,4CACGC;AAAA,6CACCC;AAAA;AAAA;AAAA;AAAA,mBAMxC,EACA,KAAK,EAAE,EACVjB,EAAQ,mBAAmB,YAAaU,CAAM,EAC9CT,EAAO,MAAM,QAAU,OACvBiB,IACAC,IACAvB,EAAc,QAAO,EACrBE,EAAK,MAAK,CACZ,CAEA,SAASoB,GAAa,CAChB,KAAK,KAAKxB,EAAQC,EAAa,QAAQ,IAAMA,EAAa,MAC5DS,EACE,4DACN,EACIF,EAAY,MAAM,QAAU,SAE5BP,EAAa,MAAQ,EACrBO,EAAY,MAAM,QAAU,eAEhC,CAEA,SAASiB,GAAa,CACpB,GAAIxB,EAAa,KAAO,EAAG,CACzB,MAAMyB,EAAO,SACV,cAAc,eAAe,EAC7B,wBACH,OAAO,SAAS,CAAE,IAAKA,EAAK,OAAS,EAAG,KAAM,EAAG,SAAU,QAAU,CAAA,CACtE,CACH,CAEA,SAAShB,EAAiBiB,EAAS,CACjCC,EAAS,KAAK,CACZ,SAAU,WACV,QAAS9B,EACT,QAAA6B,EACA,gBAAiB,UACjB,aAAc,UACd,YAAa,OACb,MAAO,GACP,aAAc,GACd,cAAe,EACnB,CAAG,CACH"}